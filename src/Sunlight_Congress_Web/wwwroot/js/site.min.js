var contact=angular.module("contact",[]);contact.controller("ContactCtrl",function(e,t){function o(o){o.preventDefault();var a=$("#Address").val();$("#loading").removeClass("hide"),t.get("/Home/Legislators",{params:{address:a}}).success(function(t){$("#loading").addClass("hide"),$(".content").addClass("formPresent"),e.contacts=t||[],e.contacts.switchForm=function(e){var t=$(e.currentTarget).attr("data-form-id");$(e.currentTarget).addClass("selected").siblings(".selected").removeClass("selected"),$("#responseBox form#"+t).addClass("selected").siblings(".selected").removeClass("selected")},s(!0)})}function s(e){e?$(window).off("keypress"):$(window).keypress(function(e){13==e.which&&o(e)})}$("#Address").off("click").on("click",function(){s()}),$("#AddressSubmit").off("click").on("click",function(e){o(e)}),$("#LocationSubmit").off("click").on("click",function(o){function a(o){t.get("/Home/LegislatorsByLatLong",{params:{longitude:parseFloat(o.coords.latitude.toFixed(6)),latitude:parseFloat(o.coords.longitude.toFixed(6))}}).success(function(t){$("#loading").addClass("hide"),$(".content").addClass("formPresent"),e.contacts=t||[],e.contacts.switchForm=function(e){var t=$(e.currentTarget).attr("data-form-id");$(e.currentTarget).addClass("selected").siblings(".selected").removeClass("selected"),$("#responseBox form#"+t).addClass("selected").siblings(".selected").removeClass("selected")},s(!0)})}o.preventDefault(),navigator.geolocation?navigator.geolocation.getCurrentPosition(a):alert("Geolocation not supported by this browser"),$("#loading").removeClass("hide")}),e.formData={},e.processForm=function(o){e.formData.toEmails=o,t({method:"POST",url:"/Home/SendEmail",data:$.param(e.formData),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){console.log(e),$(".formSent").html(e)})}}),$(document).ready(function(){$(".fullpage").fullpage({navigation:!1,autoScrolling:!1})});